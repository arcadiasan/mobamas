<html lang="ja" xml:lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="pragma" content="no-cache">
        <meta http-equiv="cache-control" content="no-cache">
        <meta http-equiv="expires" content="-1">
        <meta name="format-detection" content="telephone=no">
        <title>アイドルマスター シンデレラガールズ</title>
        <link rel="stylesheet" type="text/css" href="../idolmaster/css/rich/new_mypage_common.css" media="all">
        <script type="text/javascript">if(window.localStorage){var displaySet=localStorage.getItem('DisplayPositionSet');if(displaySet==1){if(navigator.userAgent.indexOf('Android')>0){document.write('<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">');document.getElementsByTagName('html')[0].style.zoom=document.documentElement.clientWidth/320;}else{document.write('<meta name="viewport" content="width=320, user-scalable=no">');}window.addEventListener('resize',function(){if(navigator.userAgent.indexOf('Android')>0)document.getElementsByTagName('html')[0].style.zoom=document.documentElement.clientWidth/320;});}else{document.write('<meta name="viewport" content="width=device-width, user-scalable=no">');}}else{document.write('<meta name="viewport" content="width=device-width, user-scalable=no">');}</script>
        <script src="../idolmaster/js/jquery-2.2.2.min.js"></script>
        <script>
            (function() {
            var _path = location.href;
            var _spec_obj;
            var _spec = 'none';
            var version = 1;
            // access方法検出
            _spec_obj = {
            'isNative': false,
            'isAndApp': false,
            'isShellApp': false,
            'isIosApp': false,
            'isChromeApp': false};
            window._spec = _spec_obj;
            if (_spec.isAndApp) {
            _spec = 'andapp'
            } else if (_spec.isIosApp) {
            _spec = 'iosApp';
            } else if(_spec.isShellApp) {
            _spec = 'shellapp';
            } else {
            _spec = 'browser?';
            }
            })();
        </script>
        <script src="../idolmaster/js/underscore-min.js"></script>
        <script src="../idolmaster/js/require.js"></script>
        <script src="../idolmaster/js/require.js"></script>
        <script>
            requirejs.config({
            paths:{
            easeljs       : "../idolmaster/js/easeljs-0.8.2.min.js",
            easeljs_0_7_1 : "../idolmaster/js/easeljs-0.7.1.min.js", //スプライトを読むためのバージョン
            tweenjs       : "../idolmaster/js/tweenjs-0.6.2.min.js",
            movieclipjs   : "../idolmaster/js/movieclip-0.7.1.min.js",
            createjs      : "../idolmaster/js/createjs-2015.11.26.min.js",
            }
            })
        </script>
        <script src="../idolmaster/js/common.js"></script>
        <script src="../idolmaster/js/common_new.js"></script>
        <script>
            $(function(){ window.$ibox = $('.ibox').ibox(); });
        </script>
        <script type="text/javascript">var se_flg = 0, bgm_flg = 0, chrome_app_flg = 0, chrome_app_extension_id = 'dnacabmnfmejgfffmcehejcmiciinpej';</script><script type="text/javascript" src="../idolmaster/js/app_sound.js"></script>
        <link rel="stylesheet" type="text/css" href="../idolmaster/css/base.css?20171116">
    </head>
    <body id="cartoon" class="index">
        <div id="top" class="page_container jsOnBtn">
            <nav class="area_menu_header">
                <div class="area_menu_header_6btn">
                    <h1 id="JtextLimit">シンデレラガールズ劇場</h1>
                    <ul>
                        <li>
                            <a class="head_menu_01" href="../">
                                <div></div>
                            </a>
                        </li>
                        <li>
                            <a class="head_menu_02 disabled">
                                <div></div>
                            </a>
                        </li>
                        <li>
                            <a class="head_menu_03 disabled">
                                <div></div>
                            </a>
                        </li>
                        <li>
                            <a class="head_menu_04 disabled">
                                <div></div>
                            </a>
                        </li>
                        <li>
                            <a class="head_menu_05 disabled">
                                <div></div>
                            </a>
                        </li>
                        <li>
                            <a class="head_menu_06 se_000 disabled" id="headerAcd">
                                <div></div>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            <input id="delay" type="hidden" value="0">
            <link rel="stylesheet" type="text/css" href="../idolmaster/css/rich/theater.css" media="all">
            <div class="theater-content m-Btm12">
                <div class="theater-page_header_new m-Head_img m-Btm4">
                    <div class="theater-latest_story_num">第1627話</div>
                    <div class="theater-latest_update_date">22/12/23</div>
                    <div class="theater-latest_thumbnail">
                        <a href="./detail?scene=1627" class="jsOnDesignBtn"><img src="../idolmaster/media/image_sp/cartoon/1627/742d14ad3565df003a565acb36f2307f.jpg" width="137"></a>
                    </div>
                    <div class="theater-latest_title">
                        <div class="theater-latest_title_text">いつものカーテンコール</div>
                    </div>
                    <a href="./detail/?scene=1627" class="theater-btn_watch theater-btn_new_theater jsOnDesignBtn"></a>
                    <div class="theater-history_story_num"></div>
                    <div class="theater-history_update_date"></div>
                    <div class="theater-history_title">
                        <div class="theater-latest_title_text"></div>
                    </div>
                    <a class="theater-btn_watch theater-btn_recent jsOnDesignBtn"></a>
                    <form action="./detail" method="get">
                        <input type="number" value="" pattern="\d*" min="1" max="1627" name="scene" class="theater-textbox_story_number">
                        <label class="theater-btn_watch theater-btn_search_story label_reset_style jsOnDesignBtn" style="cursor:pointer;">
                        <input type="submit" value="" style="display:none;"></label>
                    </form>
                </div>
                <script>Commonjs.setSearchMore({$trigger : $("#js_btn_search_more"),$contents : $("#js_search_more_contents"),});Commonjs.setSearchCheckBox($(".search_checkbox_1"));Commonjs.setSearchCheckBox($(".search_checkbox_2"));Commonjs.setSearchClear({$trigger : $(".js_btn_clear"),targets : [$("#search_idol_name"), $("#like_only"), $("#noread_only"), $("#number_scene")],});</script>
                <div id="paging_target" class="theater-text_notice m-Cnt m-Btm4"></div>
                <div class="theater-common_area m-Btm12">
                    <div class="theater-thumbnail_list m-Cnt">

                    </div>
                </div>
                <div class="m-Btm8">
                    <form method="get" action="." style="margin:0">
                        <input type="hidden" id="sort_type" name="sort_type" value="">
                        <div class="pager_area" style="height:74px;">
                            <div class="pager_submit_area">
                                <input type="number" name="page_num" id="jsPageNumber" pattern="\d*" value="">ページに
                                <label class="btn_normal_line_4 _disabled m-Cnt m-Btm8" id="jsMovePagerLabel" for="jsMovePagerBtn" style="display:inline-block;vertical-align:middle;margin-left:5px;margin-bottom:3px;">
                                <input id="jsMovePagerBtn" type="submit" value="移動" style="width:inherit;height:inherit;line-height:inherit;margin:0;"></label>
                            </div>
                            <div class="pager_panel_area">
                                <input type="submit" class="btn_pager_first jsNotDisabled jsOnDesignBtn">
                                <input type="submit" class="btn_pager_back jsNotDisabled jsOnDesignBtn">
                                <input type="submit" class="btn_pager_next jsNotDisabled jsOnDesignBtn">
                                <input type="submit" class="btn_pager_last jsNotDisabled jsOnDesignBtn">
                            </div>
                        </div>
                        <input type="hidden" name="is_paging" value="1">
                        <script>
                            $('#jsPageNumber').focus(function(){$('#jsMovePagerLabel').removeClass("_disabled");});
                        </script>
                    </form>
                </div>
                <div class="theater-page_footer"></div>
            </div>
            <div class="information_light gray m-Btm12">
                ブラウザバックや複数タブで操作を行うと、『続きから』機能が正常に動作しないことがあります。<br>
                『続きから』機能が正常に動作しない場合、再読み込みを行うと改善されることがあります。
            </div>
            <a href="https://sp.pf.mbga.jp/12008305/?guid=ON&amp;url=http%3A%2F%2Fmobamas.net%2Fidolmaster%2Fmypage%3Fl_frm%3DCartoon_index_2%26rnd%3D720068681">
                <div class="backLink">マイスタジオ</div>
            </a>
            <script>
                var details;
                var ids;
                
                function setupList(pageNum) {
                    var container = document.getElementsByClassName("theater-thumbnail_list")[0];
                    container.innerHTML = '';
                    
                    var idxStart = (pageNum - 1) * 9
                    var idxEnd = pageNum * 9;
                    for (var i = idxStart; i < idxEnd; i++) {
                        console.log(i);
                        if (i >= ids.length) break;
                        
                        detail = details[ids[i]];
                        
                        elem = document.createElement("a");
                        elem.classList.add("theater-thumbnail", "jsOnDesignBtn");
                        elem.href = "./detail/?scene=" + detail.id;
                        elem.innerHTML = '<div class="theater-thumbnail_top"><div class="theater-story_num ">' + detail.num_text + '</div></div><img src="' + detail.thumbnail + '" width="88"><div class="theater-thumbnail_bottom"><div class="theater-update_date">' + detail.date + '</div></div>';
                        
                        container.appendChild(elem);
                    }
                }
                    
                function setupPager(pageNum, maxPage) {
                    document.getElementsByClassName("pager_panel_area")[0].innerHTML += (pageNum + " / " + maxPage);
                    var input = document.getElementById("jsPageNumber");
                    
                    btnFirst = document.getElementsByClassName("btn_pager_first")[0];
                    btnFirst.addEventListener('click', function(e) {
                        input.value = 1;
                    });
                    btnBack = document.getElementsByClassName("btn_pager_back")[0];
                    btnBack.addEventListener('click', function(e) {
                        input.value = pageNum > 1 ? pageNum - 1 : 1;
                    });
                    btnNext = document.getElementsByClassName("btn_pager_next")[0];
                    btnNext.addEventListener('click', function(e) {
                        input.value = pageNum < maxPage ? pageNum + 1 : maxPage;
                    });
                    btnLast = document.getElementsByClassName("btn_pager_last")[0];
                    btnLast.addEventListener('click', function(e) {
                        input.value = maxPage;
                    });
                    
                    if (pageNum == 1) {
                        btnFirst.disabled = true;
                        btnFirst.classList.add("_disabled");
                        btnBack.disabled = true;
                        btnBack.classList.add("_disabled");
                    }
                    if (pageNum == maxPage) {
                        btnNext.disabled = true;
                        btnNext.classList.add("_disabled");
                        btnLast.disabled = true;
                        btnLast.classList.add("_disabled");
                    }
                }
                
                $(function() {
                    $(".theater-btn_search_story").on("click", function() {
                    se_play('se_002');
                    });
                        
                    var searchParams = new URLSearchParams(window.location.search);
                    var pageNum = searchParams.get("page_num");
                    pageNum = pageNum ? parseInt(pageNum) : 1;
                    
                    var req = new XMLHttpRequest();
                    req.open('GET', "../idolmaster/cartoon/cartoon.json", false);
                    req.send();
                    
                    details = JSON.parse(req.response);
                    
                    var historyId = window.localStorage.getItem("history_id");
                    if (historyId) {
                        document.getElementsByClassName("theater-history_story_num")[0].innerText = details[historyId].num_text;
                        document.getElementsByClassName("theater-history_update_date")[0].innerText = details[historyId].date;
                        document.getElementsByClassName("theater-history_title")[0].innerText = details[historyId].title;
                        document.getElementsByClassName("theater-btn_recent")[0].href = "./detail/?scene=" + historyId;
                        
                    }
                    
                    ids = _.keys(details);
                    ids.reverse();
                    
                    var maxPage = Math.floor(ids.length / 9) + 1;
                    if (pageNum < 1) pageNum = 1;
                    if (pageNum > maxPage) pageNum = maxPage;
                    
                    setupList(pageNum);
                    setupPager(pageNum, maxPage);
                })
            </script>
            <footer>
                <div class="line_idolmaster"></div>
                <a href="#top" id="toPageTop" class="mypage_under">
                    <div></div>
                </a>
                <div class="t-Cnt">©T.K. THE IDOLM@STER™ &amp; ©BNEI</div>
            </footer>
        </div>
        <script>
            window._tarminal = {
            'native_app_flg': false,
            'android_app_flg': false,
            'ios_app_flg': false,
            'shell_app_flg': false};
        </script><script>window._tarminal = {'native_app_flg': false,'android_app_flg': false,'ios_app_flg': false,'shell_app_flg': false};</script>
    </body>
</html>